{
  "version": 3,
  "sources": ["../../src/interfaces/browser.ts", "../../src/handler/messagehandler.ts"],
  "sourcesContent": ["//static table\nexport type ChromeMessage = {\n\ttype: string;\n\tchannel?: string;\n\tchannels?: string[];\n\tenabled?: boolean;\n}\n\nexport class Browser {\n\tpublic static get isFirefox() {\n\t\treturn navigator.userAgent.toLowerCase().indexOf(\"firefox\") > -1;\n\t}\n\tpublic static get browser(): any | undefined {\n\t\t// @ts-ignore\n\t\tif (chrome) {\n\t\t\t// @ts-ignore\n\t\t\treturn chrome;\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\treturn browser;\n\t\t}\n\t}\n}\n", "import { Dispatch } from \"../framework/tagger\";\nimport { Browser, ChromeMessage } from \"../interfaces/browser\";\n\n//communicate with service workers\nexport class MessageHandler {\n\tstatic send(message: ChromeMessage, callback?: Dispatch) {\n\t\tBrowser.browser.runtime.sendMessage(message, (response: any) => {\n\t\t\tvar lastError = Browser.browser.runtime.lastError;\n\t\t\tif (lastError) {\n\t\t\t\tconsole.error(\"[MessageHandler] Error: %s\", lastError.message);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (callback)\n\t\t\t\tcallback(response);\n\t\t});\n\t}\n\n\tstatic addChannel(channel: string) {\n\t\tthis.send({ type: \"add-channel\", channel: channel });\n\t}\n\n\tstatic removeChannel(channel: string) {\n\t\tthis.send({ type: \"remove-channel\", channel: channel });\n\t}\n\n\tstatic onMessage(callback: Function) {\n\t\tBrowser.browser.runtime.onMessage.addListener(() => callback());\n\t}\n\n}\n"],
  "mappings": ";;;AAQO,MAAM,UAAN,MAAc;AAAA,IACpB,WAAkB,YAAY;AAC7B,aAAO,UAAU,UAAU,YAAY,EAAE,QAAQ,SAAS,IAAI;AAAA,IAC/D;AAAA,IACA,WAAkB,UAA2B;AAE5C,UAAI,QAAQ;AAEX,eAAO;AAAA,MACR,OAAO;AAEN,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;;;AClBO,MAAM,iBAAN,MAAqB;AAAA,IAC3B,OAAO,KAAK,SAAwB,UAAqB;AACxD,cAAQ,QAAQ,QAAQ,YAAY,SAAS,CAAC,aAAkB;AAC/D,YAAI,YAAY,QAAQ,QAAQ,QAAQ;AACxC,YAAI,WAAW;AACd,kBAAQ,MAAM,8BAA8B,UAAU,OAAO;AAC7D;AAAA,QACD;AACA,YAAI;AACH,mBAAS,QAAQ;AAAA,MACnB,CAAC;AAAA,IACF;AAAA,IAEA,OAAO,WAAW,SAAiB;AAClC,WAAK,KAAK,EAAE,MAAM,eAAe,QAAiB,CAAC;AAAA,IACpD;AAAA,IAEA,OAAO,cAAc,SAAiB;AACrC,WAAK,KAAK,EAAE,MAAM,kBAAkB,QAAiB,CAAC;AAAA,IACvD;AAAA,IAEA,OAAO,UAAU,UAAoB;AACpC,cAAQ,QAAQ,QAAQ,UAAU,YAAY,MAAM,SAAS,CAAC;AAAA,IAC/D;AAAA,EAED;",
  "names": []
}
