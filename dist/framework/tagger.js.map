{
  "version": 3,
  "sources": ["../../src/framework/tagger.ts"],
  "sourcesContent": ["console.log('[tagger framework] loaded');\nexport type Tag = keyof HTMLElementTagNameMap;\nexport type Attribute = { [key: string]: any };\n\n\nexport type State<T> = {\n\tstate: DispatchWithResult<void, T>;\n\tsetState: Dispatch<T>;\n}\n\nexport class Updater {\n\tprivate static instance: Updater;\n\tprivate events: Dispatch[] = [];\n\n\tprivate constructor() { }\n\tstatic getInstance() {\n\t\tif (!Updater.instance) {\n\t\t\tUpdater.instance = new Updater();\n\t\t}\n\t\treturn Updater.instance;\n\t}\n\n\tpublic registerEvent(event: Dispatch) {\n\t\tthis.events.push(event);\n\t}\n\n\tpublic update() {\n\t\tthis.events.forEach((event) => {\n\t\t\tevent();\n\t\t});\n\t}\n}\n\nexport function createState<T>(initialState: T): State<T> {\n\tlet state = initialState;\n\tconst setState = (newState: T) => {\n\t\tstate = newState;\n\t\tUpdater.getInstance().update();\n\t};\n\treturn { state: () => state, setState };\n}\n\n\nexport function flattenString(arr: string[]): string {\n\treturn arr.join(' ');\n}\n\nexport function tag(tag: Tag, attr: Attribute = {}, ...children: HTMLElement[]) {\n\tconst element = document.createElement(tag);\n\n\tif (attr) {\n\t\tObject.keys(attr).forEach((key) => {\n\t\t\telement.setAttribute(key, attr[key]);\n\t\t});\n\t\telement.classList.add('tag');\n\t}\n\n\tif (children) {\n\t\tchildren.forEach((child) => {\n\t\t\telement.appendChild(child);\n\t\t});\n\t}\n\n\treturn element;\n}\n\nexport function th2(text: string, attr: Attribute = {}) {\n\treturn tag('h2', { ...attr }, document.createTextNode(text) as any);\n}\n\nexport function tdiv(attr: Attribute = {}, ...children: HTMLElement[]) {\n\treturn tag('div', attr, ...children);\n}\n\ntype InputElementProps = \"text\" | \"password\" | \"checkbox\" | \"radio\" | \"submit\" | \"reset\" | \"file\" | \"hidden\" | \"image\" | \"button\";\n\n\nexport function tinput(props: InputElementProps, placeHolder: string = \"\", defaultValue: string = \"\", onValueChange?: Dispatch<string>, className: string = \"\", attr: Attribute = {}) {\n\tconst state: State<string> = createState(defaultValue);\n\tconst input = tag('input', { type: props, placeholder: placeHolder, class: className, ...attr }) as HTMLInputElement;\n\tinput.value = defaultValue;\n\tinput.addEventListener(\"input\", (_: Event) => {\n\t\tonValueChange && onValueChange(state.state());\n\t\tstate.setState(input.value);\n\t})\n\tfunction update() {\n\t\tinput.value = state.state();\n\t}\n\tUpdater.getInstance().registerEvent(update);\n\treturn { input, state };\n}\n\nexport function tbutton(onclick: Dispatch, text: string, className: string = \"\", attr: Attribute = {}, ...children: HTMLElement[]) {\n\tconst button = tag('button', { class: className, ...attr }, ...children);\n\tbutton.appendChild(document.createTextNode(text));\n\tbutton.onclick = (e) => {\n\t\te.preventDefault();\n\t\tonclick();\n\t}\n\treturn button;\n}\n\nexport type FlexElementProps = \"column\" | \"row\" | \"align-center\" | \"align-start\" | \"align-end\" | \"justify-center\" | \"justify-start\" | \"justify-end\" | \"justify-between\" | \"justify-around\" | \"wrap\";\nexport function tflex(props: FlexElementProps[] = [], className: string = \"\", attr: Attribute = {}, ...children: HTMLElement[]) {\n\treturn tag('div', { class: `flex ${flattenString(props)} ${className}`, ...attr }, ...children);\n}\n\nexport type Dispatch<T = any> = ((...value: T[]) => void);\nexport type DispatchWithResult<A = any, R = any> = ((...value: A[]) => R);\n\nexport function t_toggle_page(className: string = \"\", attr: Attribute = {}, ...children: HTMLElement[]): { element: HTMLElement, toggle: Dispatch } {\n\n\tconst container = tdiv({ class: `toggle-page ${className}`, ...attr }, ...children);\n\tcontainer.onclick = (e: MouseEvent) => {\n\t\t//absorb click from parent\n\t\te.stopPropagation();\n\t}\n\n\tfunction toggle() {\n\t\tif (container.classList.contains('open')) {\n\t\t\tcontainer.classList.remove('open');\n\t\t\treturn;\n\t\t} else {\n\t\t\tcontainer.classList.add('open');\n\t\t}\n\t}\n\n\treturn { element: container, toggle };\n}\n\n\n"],
  "mappings": "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",
  "names": ["tag"]
}
